{"id":"m8cI","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../../webgl/Buffer.js","loc":{"line":17,"column":29},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Buffer.js"},{"name":"../../webgl.js","loc":{"line":18,"column":65},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl.js"},{"name":"../../webgl/Helper.js","loc":{"line":19,"column":46},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js"},{"name":"../../geom/GeometryType.js","loc":{"line":20,"column":25},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/geom/GeometryType.js"},{"name":"./Layer.js","loc":{"line":21,"column":89},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/Layer.js"},{"name":"../../ViewHint.js","loc":{"line":22,"column":21},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/ViewHint.js"},{"name":"../../extent.js","loc":{"line":23,"column":44},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/extent.js"},{"name":"../../transform.js","loc":{"line":24,"column":135},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/transform.js"},{"name":"../../worker/webgl.js","loc":{"line":25,"column":44},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/worker/webgl.js"},{"name":"../../util.js","loc":{"line":26,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/util.js"},{"name":"../../webgl/RenderTarget.js","loc":{"line":27,"column":30},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/RenderTarget.js"},{"name":"../../asserts.js","loc":{"line":28,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/asserts.js"},{"name":"../../layer/BaseVector.js","loc":{"line":29,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/layer/BaseVector.js"},{"name":"../../events.js","loc":{"line":30,"column":38},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events.js"},{"name":"../../source/VectorEventType.js","loc":{"line":31,"column":28},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/webgl/PointsLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/VectorEventType.js"}],"generated":{"js":"var $m8cI$exports={};$parcel$require(\"m8cI\",\"../../webgl/Buffer.js\"),$parcel$require(\"m8cI\",\"../../webgl.js\"),$parcel$require(\"m8cI\",\"../../webgl/Helper.js\"),$parcel$require(\"m8cI\",\"../../geom/GeometryType.js\"),$parcel$require(\"m8cI\",\"./Layer.js\"),$parcel$require(\"m8cI\",\"../../ViewHint.js\"),$parcel$require(\"m8cI\",\"../../extent.js\"),$parcel$require(\"m8cI\",\"../../transform.js\"),$parcel$require(\"m8cI\",\"../../worker/webgl.js\"),$parcel$require(\"m8cI\",\"../../util.js\"),$parcel$require(\"m8cI\",\"../../webgl/RenderTarget.js\"),$parcel$require(\"m8cI\",\"../../asserts.js\"),$parcel$require(\"m8cI\",\"../../layer/BaseVector.js\"),$parcel$require(\"m8cI\",\"../../events.js\"),$parcel$require(\"m8cI\",\"../../source/VectorEventType.js\");var $m8cI$var$__extends=$m8cI$exports&&$m8cI$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$m8cI$export$default=function(e){function t(t,r){var i=this,s=r.uniforms||{},n=$m8cI$import$createTransform();if(s[$m8cI$import$DefaultUniform.PROJECTION_MATRIX]=n,(i=e.call(this,t,{uniforms:s,postProcesses:r.postProcesses})||this).sourceRevision_=-1,i.verticesBuffer_=new $m8cI$import$WebGLArrayBuffer($m8cI$import$ARRAY_BUFFER,$m8cI$import$DYNAMIC_DRAW),i.hitVerticesBuffer_=new $m8cI$import$WebGLArrayBuffer($m8cI$import$ARRAY_BUFFER,$m8cI$import$DYNAMIC_DRAW),i.indicesBuffer_=new $m8cI$import$WebGLArrayBuffer($m8cI$import$ELEMENT_ARRAY_BUFFER,$m8cI$import$DYNAMIC_DRAW),i.program_=i.helper.getProgram(r.fragmentShader,r.vertexShader),i.getShaderCompileErrors())throw new Error(i.getShaderCompileErrors());if(i.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),i.hitProgram_=i.hitDetectionEnabled_&&i.helper.getProgram(r.hitFragmentShader,r.hitVertexShader),i.getShaderCompileErrors())throw new Error(i.getShaderCompileErrors());var o=r.attributes?r.attributes.map(function(e){return{name:\"a_\"+e.name,size:1,type:$m8cI$import$AttributeType.FLOAT}}):[];i.attributes=[{name:\"a_position\",size:2,type:$m8cI$import$AttributeType.FLOAT},{name:\"a_index\",size:1,type:$m8cI$import$AttributeType.FLOAT}].concat(o),i.hitDetectionAttributes=[{name:\"a_position\",size:2,type:$m8cI$import$AttributeType.FLOAT},{name:\"a_index\",size:1,type:$m8cI$import$AttributeType.FLOAT},{name:\"a_hitColor\",size:4,type:$m8cI$import$AttributeType.FLOAT},{name:\"a_featureUid\",size:1,type:$m8cI$import$AttributeType.FLOAT}].concat(o),i.customAttributes=r.attributes?r.attributes:[],i.previousExtent_=$m8cI$import$createEmpty(),i.currentTransform_=n,i.renderTransform_=$m8cI$import$createTransform(),i.invertRenderTransform_=$m8cI$import$createTransform(),i.renderInstructions_=new Float32Array(0),i.hitRenderInstructions_=new Float32Array(0),i.hitRenderTarget_=i.hitDetectionEnabled_&&new $m8cI$import$WebGLRenderTarget(i.helper),i.worker_=$m8cI$import$createWebGLWorker(),i.worker_.addEventListener(\"message\",function(e){var t=e.data;if(t.type===$m8cI$import$WebGLWorkerMessageType.GENERATE_BUFFERS){var r=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,$m8cI$import$makeInverseTransform(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):this.renderInstructions_=new Float32Array(e.data.renderInstructions),this.getLayer().changed()}}.bind(i)),i.featureCache_={},i.featureCount_=0;var a=i.getLayer().getSource();return i.sourceListenKeys_=[$m8cI$import$listen(a,$m8cI$import$VectorEventType.ADDFEATURE,i.handleSourceFeatureAdded_,i),$m8cI$import$listen(a,$m8cI$import$VectorEventType.CHANGEFEATURE,i.handleSourceFeatureChanged_,i),$m8cI$import$listen(a,$m8cI$import$VectorEventType.REMOVEFEATURE,i.handleSourceFeatureDelete_,i)],a.forEachFeature(function(e){this.featureCache_[$m8cI$import$getUid(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(i)),i}return $m8cI$var$__extends(t,e),t.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[$m8cI$import$getUid(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},t.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[$m8cI$import$getUid(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},t.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[$m8cI$import$getUid(t)],this.featureCount_--},t.prototype.renderFrame=function(e){var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t),this.helper.finalizeDraw(e);var r=this.helper.getCanvas(),i=e.layerStatesArray[e.layerIndex].opacity;return i!==parseFloat(r.style.opacity)&&(r.style.opacity=i),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),r},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource(),i=e.viewState,s=!e.viewHints[$m8cI$import$ViewHint.ANIMATING]&&!e.viewHints[$m8cI$import$ViewHint.INTERACTING],n=!$m8cI$import$equals(this.previousExtent_,e.extent),o=this.sourceRevision_<r.getRevision();if(o&&(this.sourceRevision_=r.getRevision()),s&&(n||o)){var a=i.projection,c=i.resolution,u=t instanceof $m8cI$import$BaseVector?t.getRenderBuffer():0,h=$m8cI$import$buffer(e.extent,u*c);r.loadFeatures(h,c,a),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.makeProjectionTransform(e,this.currentTransform_),$m8cI$import$multiplyTransform(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},t.prototype.rebuildBuffers_=function(e){var t=$m8cI$import$createTransform();this.helper.makeProjectionTransform(e,t);var r,i,s=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===s||(this.renderInstructions_=new Float32Array(s)),this.hitDetectionEnabled_){var n=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===n||(this.hitRenderInstructions_=new Float32Array(n))}var o,a=[],c=[],u=0,h=0;for(var m in this.featureCache_)if((i=(r=this.featureCache_[m]).geometry)&&i.getType()===$m8cI$import$GeometryType.POINT){a[0]=i.getFlatCoordinates()[0],a[1]=i.getFlatCoordinates()[1],$m8cI$import$applyTransform(t,a),o=$m8cI$import$colorEncodeId(h+6,c),this.renderInstructions_[u++]=a[0],this.renderInstructions_[u++]=a[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=a[0],this.hitRenderInstructions_[h++]=a[1],this.hitRenderInstructions_[h++]=o[0],this.hitRenderInstructions_[h++]=o[1],this.hitRenderInstructions_[h++]=o[2],this.hitRenderInstructions_[h++]=o[3],this.hitRenderInstructions_[h++]=Number(m));for(var $=void 0,p=0;p<this.customAttributes.length;p++)$=this.customAttributes[p].callback(r.feature,r.properties),this.renderInstructions_[u++]=$,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=$)}var f={type:$m8cI$import$WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(f.projectionTransform=t,this.worker_.postMessage(f,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var l={type:$m8cI$import$WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};l.projectionTransform=t,l.hitDetection=!0,this.worker_.postMessage(l,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,s){if($m8cI$import$assert(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var n=$m8cI$import$applyTransform(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(n[0]/2,n[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],c=$m8cI$import$colorDecodeId(a),u=this.hitRenderInstructions_[c],h=Math.floor(u).toString(),m=this.getLayer().getSource().getFeatureByUid(h);return m?i(m,this.getLayer()):void 0}},t.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},t.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){$m8cI$import$unlistenByKey(e)}),this.sourceListenKeys_=null,e.prototype.disposeInternal.call(this)},t}($m8cI$import$WebGLLayerRenderer);$m8cI$exports.default=$m8cI$export$default;"},"sourceMaps":null,"error":null,"hash":"9922d42462798c3ee28325f7b1ef88d1","cacheData":{"env":{},"imports":{"$m8cI$import$WebGLArrayBuffer":["../../webgl/Buffer.js","default"],"$m8cI$import$ARRAY_BUFFER":["../../webgl.js","ARRAY_BUFFER"],"$m8cI$import$DYNAMIC_DRAW":["../../webgl.js","DYNAMIC_DRAW"],"$m8cI$import$ELEMENT_ARRAY_BUFFER":["../../webgl.js","ELEMENT_ARRAY_BUFFER"],"$m8cI$import$AttributeType":["../../webgl/Helper.js","AttributeType"],"$m8cI$import$DefaultUniform":["../../webgl/Helper.js","DefaultUniform"],"$m8cI$import$GeometryType":["../../geom/GeometryType.js","default"],"$m8cI$import$WebGLLayerRenderer":["./Layer.js","default"],"$m8cI$import$colorDecodeId":["./Layer.js","colorDecodeId"],"$m8cI$import$colorEncodeId":["./Layer.js","colorEncodeId"],"$m8cI$import$WebGLWorkerMessageType":["./Layer.js","WebGLWorkerMessageType"],"$m8cI$import$ViewHint":["../../ViewHint.js","default"],"$m8cI$import$buffer":["../../extent.js","buffer"],"$m8cI$import$createEmpty":["../../extent.js","createEmpty"],"$m8cI$import$equals":["../../extent.js","equals"],"$m8cI$import$applyTransform":["../../transform.js","apply"],"$m8cI$import$createTransform":["../../transform.js","create"],"$m8cI$import$makeInverseTransform":["../../transform.js","makeInverse"],"$m8cI$import$multiplyTransform":["../../transform.js","multiply"],"$m8cI$import$createWebGLWorker":["../../worker/webgl.js","create"],"$m8cI$import$getUid":["../../util.js","getUid"],"$m8cI$import$WebGLRenderTarget":["../../webgl/RenderTarget.js","default"],"$m8cI$import$assert":["../../asserts.js","assert"],"$m8cI$import$BaseVector":["../../layer/BaseVector.js","default"],"$m8cI$import$listen":["../../events.js","listen"],"$m8cI$import$unlistenByKey":["../../events.js","unlistenByKey"],"$m8cI$import$VectorEventType":["../../source/VectorEventType.js","default"]},"exports":{"default":"$m8cI$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}