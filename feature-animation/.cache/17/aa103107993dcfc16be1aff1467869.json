{"id":"ZSPG","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/package.json","includedInParent":true,"mtime":1575649358216},{"name":"../actionlib/ActionClient","loc":{"line":6,"column":27},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/tf/TFClient.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/actionlib/ActionClient.js"},{"name":"../actionlib/Goal","loc":{"line":7,"column":19},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/tf/TFClient.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/actionlib/Goal.js"},{"name":"../core/Service.js","loc":{"line":9,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/tf/TFClient.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/core/Service.js"},{"name":"../core/ServiceRequest.js","loc":{"line":10,"column":29},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/tf/TFClient.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/core/ServiceRequest.js"},{"name":"../math/Transform","loc":{"line":12,"column":24},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/tf/TFClient.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/roslib/src/math/Transform.js"}],"generated":{"js":"var $ZSPG$exports={},$ZSPG$var$ActionClient=$parcel$require(\"ZSPG\",\"../actionlib/ActionClient\"),$ZSPG$var$Goal=$parcel$require(\"ZSPG\",\"../actionlib/Goal\"),$ZSPG$var$Service=$parcel$require(\"ZSPG\",\"../core/Service.js\"),$ZSPG$var$ServiceRequest=$parcel$require(\"ZSPG\",\"../core/ServiceRequest.js\"),$ZSPG$var$Transform=$parcel$require(\"ZSPG\",\"../math/Transform\");function $ZSPG$var$TFClient(e){e=e||{},this.ros=e.ros,this.fixedFrame=e.fixedFrame||\"/base_link\",this.angularThres=e.angularThres||2,this.transThres=e.transThres||.01,this.rate=e.rate||10,this.updateDelay=e.updateDelay||50;var r=e.topicTimeout||2,t=Math.floor(r),s=Math.floor(1e9*(r-t));this.topicTimeout={secs:t,nsecs:s},this.serverName=e.serverName||\"/tf2_web_republisher\",this.repubServiceName=e.repubServiceName||\"/republish_tfs\",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this.actionClient=this.ros.ActionClient({serverName:this.serverName,actionName:\"tf2_web_republisher/TFSubscriptionAction\",omitStatus:!0,omitResult:!0}),this.serviceClient=this.ros.Service({name:this.repubServiceName,serviceType:\"tf2_web_republisher/RepublishTFs\"})}$ZSPG$var$TFClient.prototype.processTFArray=function(e){e.transforms.forEach(function(e){var r=e.child_frame_id;\"/\"===r[0]&&(r=r.substring(1));var t=this.frameInfos[r];t&&(t.transform=new $ZSPG$var$Transform({translation:e.transform.translation,rotation:e.transform.rotation}),t.cbs.forEach(function(e){e(t.transform)}))},this)},$ZSPG$var$TFClient.prototype.updateGoal=function(){var e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new $ZSPG$var$Goal({actionClient:this.actionClient,goalMessage:e}),this.currentGoal.on(\"feedback\",this.processTFArray.bind(this)),this.currentGoal.send();else{e.timeout=this.topicTimeout;var r=new $ZSPG$var$ServiceRequest(e);this.serviceClient.callService(r,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},$ZSPG$var$TFClient.prototype.processResponse=function(e){this.currentTopic&&this.currentTopic.unsubscribe(),this.currentTopic=this.ros.Topic({name:e.topic_name,messageType:\"tf2_web_republisher/TFArray\"}),this.currentTopic.subscribe(this.processTFArray.bind(this))},$ZSPG$var$TFClient.prototype.subscribe=function(e,r){\"/\"===e[0]&&(e=e.substring(1)),this.frameInfos[e]?this.frameInfos[e].transform&&r(this.frameInfos[e].transform):(this.frameInfos[e]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[e].cbs.push(r)},$ZSPG$var$TFClient.prototype.unsubscribe=function(e,r){\"/\"===e[0]&&(e=e.substring(1));for(var t=this.frameInfos[e],s=t&&t.cbs||[],i=s.length;i--;)s[i]===r&&s.splice(i,1);r&&0!==s.length||delete this.frameInfos[e]},$ZSPG$var$TFClient.prototype.dispose=function(){this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe()},$ZSPG$exports=$ZSPG$var$TFClient;"},"sourceMaps":null,"error":null,"hash":"c6a0c54f3b4e79ea826c8ef3ac1f517e","cacheData":{"env":{},"imports":{"$require$../actionlib/ActionClient":["../actionlib/ActionClient","*"],"$require$../actionlib/Goal":["../actionlib/Goal","*"],"$require$../core/Service.js":["../core/Service.js","*"],"$require$../core/ServiceRequest.js":["../core/ServiceRequest.js","*"],"$require$../math/Transform":["../math/Transform","*"]},"exports":{},"wildcards":[],"sideEffects":true,"isCommonJS":true}}