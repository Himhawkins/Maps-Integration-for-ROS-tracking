{"id":"UST7","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../../util.js","loc":{"line":17,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/util.js"},{"name":"../../TileState.js","loc":{"line":18,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/TileState.js"},{"name":"../../ViewHint.js","loc":{"line":19,"column":21},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/ViewHint.js"},{"name":"../../events.js","loc":{"line":20,"column":38},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events.js"},{"name":"../../events/EventType.js","loc":{"line":21,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/EventType.js"},{"name":"../../extent.js","loc":{"line":22,"column":118},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/extent.js"},{"name":"../../layer/VectorTileRenderType.js","loc":{"line":23,"column":33},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/layer/VectorTileRenderType.js"},{"name":"../../render/canvas/BuilderType.js","loc":{"line":24,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/render/canvas/BuilderType.js"},{"name":"../../render/canvas/BuilderGroup.js","loc":{"line":25,"column":31},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/render/canvas/BuilderGroup.js"},{"name":"./TileLayer.js","loc":{"line":26,"column":36},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js"},{"name":"../../size.js","loc":{"line":27,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/size.js"},{"name":"../vector.js","loc":{"line":28,"column":80},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/vector.js"},{"name":"../../transform.js","loc":{"line":29,"column":167},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/transform.js"},{"name":"../../render/canvas/ExecutorGroup.js","loc":{"line":30,"column":53},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/render/canvas/ExecutorGroup.js"},{"name":"../../obj.js","loc":{"line":31,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/obj.js"},{"name":"../../render/canvas/hitdetect.js","loc":{"line":32,"column":55},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/VectorTileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/render/canvas/hitdetect.js"}],"generated":{"js":"var $UST7$exports={};$parcel$require(\"UST7\",\"../../util.js\"),$parcel$require(\"UST7\",\"../../TileState.js\"),$parcel$require(\"UST7\",\"../../ViewHint.js\"),$parcel$require(\"UST7\",\"../../events.js\"),$parcel$require(\"UST7\",\"../../events/EventType.js\"),$parcel$require(\"UST7\",\"../../extent.js\"),$parcel$require(\"UST7\",\"../../layer/VectorTileRenderType.js\"),$parcel$require(\"UST7\",\"../../render/canvas/BuilderType.js\"),$parcel$require(\"UST7\",\"../../render/canvas/BuilderGroup.js\"),$parcel$require(\"UST7\",\"./TileLayer.js\"),$parcel$require(\"UST7\",\"../../size.js\"),$parcel$require(\"UST7\",\"../vector.js\"),$parcel$require(\"UST7\",\"../../transform.js\"),$parcel$require(\"UST7\",\"../../render/canvas/ExecutorGroup.js\"),$parcel$require(\"UST7\",\"../../obj.js\"),$parcel$require(\"UST7\",\"../../render/canvas/hitdetect.js\");var $UST7$var$__extends=$UST7$exports&&$UST7$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$UST7$var$IMAGE_REPLAYS={image:[$UST7$import$ReplayType.POLYGON,$UST7$import$ReplayType.CIRCLE,$UST7$import$ReplayType.LINE_STRING,$UST7$import$ReplayType.IMAGE,$UST7$import$ReplayType.TEXT],hybrid:[$UST7$import$ReplayType.POLYGON,$UST7$import$ReplayType.LINE_STRING]},$UST7$var$VECTOR_REPLAYS={image:[$UST7$import$ReplayType.DEFAULT],hybrid:[$UST7$import$ReplayType.IMAGE,$UST7$import$ReplayType.TEXT,$UST7$import$ReplayType.DEFAULT]},$UST7$export$default=function(e){function t(t){var r=e.call(this,t)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=$UST7$import$createTransform(),r}return $UST7$var$__extends(t,e),t.prototype.prepareTile=function(e,t,r,i){var o,n=$UST7$import$getUid(e),a=e.getState();return(a===$UST7$import$TileState.LOADED&&e.hifi||a===$UST7$import$TileState.ERROR||a===$UST7$import$TileState.ABORT)&&n in this.tileListenerKeys_&&($UST7$import$unlistenByKey(this.tileListenerKeys_[n]),delete this.tileListenerKeys_[n]),a!==$UST7$import$TileState.LOADED&&a!==$UST7$import$TileState.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e,t,r)&&(o=!0,i&&(this.renderTileImageQueue_[n]=e))),o},t.prototype.getTile=function(t,r,i,o){var n=e.prototype.getTile.call(this,t,r,i,o),a=o.pixelRatio,l=o.viewState,$=l.resolution,s=l.projection;if(n.getState()<$UST7$import$TileState.LOADED){n.wantedResolution=$;var d=$UST7$import$getUid(n);if(!(d in this.tileListenerKeys_)){var p=$UST7$import$listen(n,$UST7$import$EventType.CHANGE,this.prepareTile.bind(this,n,a,s,!0));this.tileListenerKeys_[d]=p}}else{var T=o.viewHints;!!(T[$UST7$import$ViewHint.ANIMATING]||T[$UST7$import$ViewHint.INTERACTING])&&n.wantedResolution||(n.wantedResolution=$),this.prepareTile(n,a,s,!1)&&this.renderTileImage_(n,o)}return n},t.prototype.isDrawableTile=function(t){return e.prototype.isDrawableTile.call(this,t)&&t.hasContext(this.getLayer())},t.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},t.prototype.prepareFrame=function(t){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,e.prototype.prepareFrame.call(this,t)},t.prototype.updateExecutorGroup_=function(e,t,r){var i=this.getLayer(),o=i.getRevision(),n=i.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(i);if(l.dirty||l.renderedResolution!==a||l.renderedRevision!=o||l.renderedRenderOrder!=n||l.renderedZ!==e.sourceZ){var $=i.getSource(),s=$.getTileGrid(),d=$.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),p=$.getSourceTiles(t,r,e),T=$UST7$import$getUid(i),u=e.executorGroups[T];if(u)for(var c=0,g=u.length;c<g;++c)u[c].dispose();e.hitDetectionImageData=null,e.executorGroups[T]=[];for(var S=function(r,o){var u=p[r];if(u.getState()!=$UST7$import$TileState.LOADED)return\"continue\";var c=u.tileCoord,g=s.getTileCoordExtent(c),S=$UST7$import$getIntersection(d,g),h=$UST7$import$equals(g,S)?null:$UST7$import$buffer(S,i.getRenderBuffer()*a,m.tmpExtent);l.dirty=!1;var v=new $UST7$import$CanvasBuilderGroup(0,S,a,t,i.getDeclutter()),y=$UST7$import$getSquaredRenderTolerance(a,t),f=function(e){var t,r=e.getStyleFunction()||i.getStyleFunction();if(r&&(t=r(e,a)),t){var o=this.renderFeature(e,y,t,v);this.dirty_=this.dirty_||o,l.dirty=l.dirty||o}},U=u.getFeatures();n&&n!==l.renderedRenderOrder&&U.sort(n);for(var R=0,_=U.length;R<_;++R){var x=U[R];h&&!$UST7$import$intersects(h,x.getGeometry().getExtent())||f.call(m,x)}var C=v.finish(),E=i.getDeclutter()&&1===p.length?null:S,I=new $UST7$import$CanvasExecutorGroup(E,a,t,$.getOverlaps(),C,i.getRenderBuffer());e.executorGroups[T].push(I)},m=this,h=0,v=p.length;h<v;++h)S(h);l.renderedRevision=o,l.renderedZ=e.sourceZ,l.renderedRenderOrder=n,l.renderedResolution=a}},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,o){var n=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var l,$,s,d=this.getLayer(),p=d.getDeclutter(),T=d.getSource().getTileGridForProjection(t.viewState.projection),u={},c=this.renderedTiles,g=function(){var t=c[$],s=T.getTileCoordExtent(t.wrappedTileCoord),g=$UST7$import$containsCoordinate(s,e);if(!p&&!g)return\"continue\";for(var S=t.executorGroups[$UST7$import$getUid(d)],m=0,h=S.length;m<h;++m){var v=S[m];l=l||v.forEachFeatureAtCoordinate(e,n,a,r,function(e){if(g||o&&-1!==o.indexOf(e)){var t=e.getId();if(void 0===t&&(t=$UST7$import$getUid(e)),!(t in u))return u[t]=!0,i(e,d)}},d.getDeclutter()?o:null)}};for($=0,s=c.length;$<s;++$)g();return l},t.prototype.getFeatures=function(e){return new Promise(function(t,r){for(var i,o=this.getLayer(),n=o.getSource(),a=this.renderedProjection,l=a.getExtent(),$=this.renderedResolution,s=n.getTileGridForProjection(a),d=$UST7$import$applyTransform(this.renderedPixelToCoordinateTransform_,e.slice()),p=s.getTileCoordForCoordAndResolution(d,$),T=0,u=this.renderedTiles.length;T<u;++T)if(p.toString()===this.renderedTiles[T].tileCoord.toString()){if((i=this.renderedTiles[T]).getState()===$UST7$import$TileState.LOADED&&i.hifi){var c=s.getTileCoordExtent(i.tileCoord);if(n.getWrapX()&&a.canWrapX()&&!$UST7$import$containsExtent(l,c)){var g=$UST7$import$getWidth(l),S=Math.floor((d[0]-l[0])/g);d[0]-=S*g}break}i=void 0}if(i){var m=s.getTileCoordExtent(i.wrappedTileCoord),h=$UST7$import$getTopLeft(m),v=[(d[0]-h[0])/$,(h[1]-d[1])/$],y=i.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]);if(i.hitDetectionImageData)t($UST7$import$hitDetect(v,y,i.hitDetectionImageData));else{var f=$UST7$import$toSize(s.getTileSize(s.getZForResolution($))),U=[f[0]/2,f[1]/2],R=this.renderedRotation_,_=[this.getRenderTransform(s.getTileCoordCenter(i.wrappedTileCoord),$,0,.5,U[0],U[1],0)];requestAnimationFrame(function(){i.hitDetectionImageData=$UST7$import$createHitDetectionImageData(f,_,y,o.getStyleFunction(),s.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(o).renderedResolution,R),t($UST7$import$hitDetect(v,y,i.hitDetectionImageData))})}}else t([])}.bind(this))},t.prototype.handleFontsChanged=function(){$UST7$import$clear(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.renderFrame=function(t,r){var i=t.viewHints,o=!(i[$UST7$import$ViewHint.ANIMATING]||i[$UST7$import$ViewHint.INTERACTING]);this.renderQueuedTileImages_(o,t),e.prototype.renderFrame.call(this,t,r),this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var n=this.getLayer(),a=n.getRenderMode();if(a===$UST7$import$VectorTileRenderType.IMAGE)return this.container;var l=n.getSource(),$=t.usedTiles[$UST7$import$getUid(l)];for(var s in this.renderTileImageQueue_)$&&s in $||delete this.renderTileImageQueue_[s];for(var d=this.context,p=n.getDeclutter()?{}:null,T=$UST7$var$VECTOR_REPLAYS[a],u=t.pixelRatio,c=t.viewState,g=c.center,S=c.resolution,m=c.rotation,h=t.size,v=Math.round(h[0]*u),y=Math.round(h[1]*u),f=this.renderedTiles,U=l.getTileGridForProjection(t.viewState.projection),R=[],_=[],x=f.length-1;x>=0;--x){var C=f[x];if(C.getState()!=$UST7$import$TileState.ABORT)for(var E=C.tileCoord,I=U.getTileCoordExtent(C.wrappedTileCoord),L=U.getTileCoordExtent(E,this.tmpExtent)[0]-I[0],w=$UST7$import$multiply($UST7$import$scale(this.inversePixelTransform.slice(),1/u,1/u),this.getRenderTransform(g,S,m,u,v,y,L)),D=C.executorGroups[$UST7$import$getUid(n)],A=!1,G=0,j=D.length;G<j;++G){var F=D[G];if(F.hasExecutors(T)){var O=C.tileCoord[0],P=void 0;if(!p&&!A){P=F.getClipCoords(w),d.save();for(var b=0,q=R.length;b<q;++b){var N=R[b];O<_[b]&&(d.beginPath(),d.moveTo(P[0],P[1]),d.lineTo(P[2],P[3]),d.lineTo(P[4],P[5]),d.lineTo(P[6],P[7]),d.moveTo(N[6],N[7]),d.lineTo(N[4],N[5]),d.lineTo(N[2],N[3]),d.lineTo(N[0],N[1]),d.clip())}}F.execute(d,w,m,o,T,p),p||A||(d.restore(),R.push(P),_.push(O),A=!0)}}}if(p){var M=t.layerStatesArray[t.layerIndex];$UST7$import$replayDeclutter(p,d,m,M.opacity,o,t.declutterItems)}return this.container},t.prototype.renderQueuedTileImages_=function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}},t.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var n=0,a=r.length;n<a;++n)o=$UST7$import$renderFeature(i,e,r[n],t,this.boundHandleStyleImageChange_)||o;else o=$UST7$import$renderFeature(i,e,r,t,this.boundHandleStyleImageChange_);return o},t.prototype.tileImageNeedsRender_=function(e,t,r){var i=this.getLayer(),o=e.getReplayState(i),n=i.getRevision(),a=e.sourceZ,l=e.wantedResolution;return o.renderedTileResolution!==l||o.renderedTileRevision!==n||o.renderedTileZ!==a},t.prototype.renderTileImage_=function(e,t){var r=this.getLayer(),i=e.getReplayState(r),o=r.getRevision(),n=e.executorGroups[$UST7$import$getUid(r)];i.renderedTileRevision=o,i.renderedTileZ=e.sourceZ;var a=e.wrappedTileCoord,l=a[0],$=r.getSource(),s=t.pixelRatio,d=t.viewState.projection,p=$.getTileGridForProjection(d),T=p.getResolution(e.tileCoord[0]),u=t.pixelRatio/e.wantedResolution*T,c=p.getResolution(l),g=e.getContext(r);s=Math.max(s,u/s);var S=$.getTilePixelSize(l,s,d);g.canvas.width=S[0],g.canvas.height=S[1];var m=s/u;if(1!==m){var h=$UST7$import$resetTransform(this.tmpTransform_);$UST7$import$scaleTransform(h,m,m),g.setTransform.apply(g,h)}var v=p.getTileCoordExtent(a,this.tmpExtent),y=u/c,f=$UST7$import$resetTransform(this.tmpTransform_);$UST7$import$scaleTransform(f,y,-y),$UST7$import$translateTransform(f,-v[0],-v[3]);for(var U=0,R=n.length;U<R;++U){n[U].execute(g,f,0,!0,$UST7$var$IMAGE_REPLAYS[r.getRenderMode()])}i.renderedTileResolution=e.wantedResolution},t}($UST7$import$CanvasTileLayerRenderer);$UST7$exports.default=$UST7$export$default;"},"sourceMaps":null,"error":null,"hash":"a2de645e0edbe9e1fe51ac2c611a95d5","cacheData":{"env":{},"imports":{"$UST7$import$getUid":["../../util.js","getUid"],"$UST7$import$TileState":["../../TileState.js","default"],"$UST7$import$ViewHint":["../../ViewHint.js","default"],"$UST7$import$listen":["../../events.js","listen"],"$UST7$import$unlistenByKey":["../../events.js","unlistenByKey"],"$UST7$import$EventType":["../../events/EventType.js","default"],"$UST7$import$buffer":["../../extent.js","buffer"],"$UST7$import$containsCoordinate":["../../extent.js","containsCoordinate"],"$UST7$import$equals":["../../extent.js","equals"],"$UST7$import$getIntersection":["../../extent.js","getIntersection"],"$UST7$import$intersects":["../../extent.js","intersects"],"$UST7$import$containsExtent":["../../extent.js","containsExtent"],"$UST7$import$getWidth":["../../extent.js","getWidth"],"$UST7$import$getTopLeft":["../../extent.js","getTopLeft"],"$UST7$import$VectorTileRenderType":["../../layer/VectorTileRenderType.js","default"],"$UST7$import$ReplayType":["../../render/canvas/BuilderType.js","default"],"$UST7$import$CanvasBuilderGroup":["../../render/canvas/BuilderGroup.js","default"],"$UST7$import$CanvasTileLayerRenderer":["./TileLayer.js","default"],"$UST7$import$toSize":["../../size.js","toSize"],"$UST7$import$getSquaredRenderTolerance":["../vector.js","getSquaredTolerance"],"$UST7$import$renderFeature":["../vector.js","renderFeature"],"$UST7$import$applyTransform":["../../transform.js","apply"],"$UST7$import$createTransform":["../../transform.js","create"],"$UST7$import$resetTransform":["../../transform.js","reset"],"$UST7$import$scaleTransform":["../../transform.js","scale"],"$UST7$import$translateTransform":["../../transform.js","translate"],"$UST7$import$multiply":["../../transform.js","multiply"],"$UST7$import$scale":["../../transform.js","scale"],"$UST7$import$CanvasExecutorGroup":["../../render/canvas/ExecutorGroup.js","default"],"$UST7$import$replayDeclutter":["../../render/canvas/ExecutorGroup.js","replayDeclutter"],"$UST7$import$clear":["../../obj.js","clear"],"$UST7$import$createHitDetectionImageData":["../../render/canvas/hitdetect.js","createHitDetectionImageData"],"$UST7$import$hitDetect":["../../render/canvas/hitdetect.js","hitDetect"]},"exports":{"default":"$UST7$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}