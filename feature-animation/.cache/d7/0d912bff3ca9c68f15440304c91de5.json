{"id":"w95b","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../ImageCanvas.js","loc":{"line":17,"column":24},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/ImageCanvas.js"},{"name":"../TileQueue.js","loc":{"line":18,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/TileQueue.js"},{"name":"../dom.js","loc":{"line":19,"column":38},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/dom.js"},{"name":"../events/Event.js","loc":{"line":20,"column":18},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/Event.js"},{"name":"../events/EventType.js","loc":{"line":21,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/EventType.js"},{"name":"pixelworks/lib/index.js","loc":{"line":22,"column":26},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/pixelworks/lib/index.js"},{"name":"../extent.js","loc":{"line":23,"column":55},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/extent.js"},{"name":"../layer/Image.js","loc":{"line":24,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/layer/Image.js"},{"name":"../layer/Tile.js","loc":{"line":25,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/layer/Tile.js"},{"name":"../obj.js","loc":{"line":26,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/obj.js"},{"name":"../transform.js","loc":{"line":27,"column":42},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/transform.js"},{"name":"./Image.js","loc":{"line":28,"column":24},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Image.js"},{"name":"./Tile.js","loc":{"line":29,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Tile.js"},{"name":"./State.js","loc":{"line":30,"column":24},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/State.js"},{"name":"./Source.js","loc":{"line":31,"column":19},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Raster.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Source.js"}],"generated":{"js":"var $w95b$exports={};$parcel$require(\"w95b\",\"../ImageCanvas.js\"),$parcel$require(\"w95b\",\"../TileQueue.js\"),$parcel$require(\"w95b\",\"../dom.js\"),$parcel$require(\"w95b\",\"../events/Event.js\"),$parcel$require(\"w95b\",\"../events/EventType.js\"),$parcel$require(\"w95b\",\"pixelworks/lib/index.js\"),$parcel$require(\"w95b\",\"../extent.js\"),$parcel$require(\"w95b\",\"../layer/Image.js\"),$parcel$require(\"w95b\",\"../layer/Tile.js\"),$parcel$require(\"w95b\",\"../obj.js\"),$parcel$require(\"w95b\",\"../transform.js\"),$parcel$require(\"w95b\",\"./Image.js\"),$parcel$require(\"w95b\",\"./Tile.js\"),$parcel$require(\"w95b\",\"./State.js\"),$parcel$require(\"w95b\",\"./Source.js\");var $w95b$var$__extends=$w95b$exports&&$w95b$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),$w95b$var$RasterEventType={BEFOREOPERATIONS:\"beforeoperations\",AFTEROPERATIONS:\"afteroperations\"},$w95b$var$RasterOperationType={PIXEL:\"pixel\",IMAGE:\"image\"},$w95b$export$RasterSourceEvent=function(e){function t(t,r,a){var n=e.call(this,t)||this;return n.extent=r.extent,n.resolution=r.viewState.resolution/r.pixelRatio,n.data=a,n}return $w95b$var$__extends(t,e),t}($w95b$import$Event);$w95b$exports.RasterSourceEvent=$w95b$export$RasterSourceEvent;var $w95b$export$default=function(e){function t(t){var r=e.call(this,{projection:null})||this;r.worker_=null,r.operationType_=void 0!==t.operationType?t.operationType:$w95b$var$RasterOperationType.PIXEL,r.threads_=void 0!==t.threads?t.threads:1,r.layers_=$w95b$var$createLayers(t.sources);for(var a=r.changed.bind(r),n=0,i=r.layers_.length;n<i;++n)r.layers_[n].addEventListener($w95b$import$EventType.CHANGE,a);return r.tileQueue_=new $w95b$import$TileQueue(function(){return 1},r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:$w95b$import$createTransform(),extent:null,index:0,layerIndex:0,layerStatesArray:$w95b$var$getLayerStatesArray(r.layers_),pixelRatio:1,pixelToCoordinateTransform:$w95b$import$createTransform(),postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},r.setAttributions(function(e){for(var r=[],a=0,n=t.sources.length;a<n;++a){var i=t.sources[a],o=(i instanceof $w95b$import$Source?i:i.getSource()).getAttributions();if(\"function\"==typeof o){var $=o(e);r.push.apply(r,$)}}return 0!==r.length?r:null}),void 0!==t.operation&&r.setOperation(t.operation,t.lib),r}return $w95b$var$__extends(t,e),t.prototype.setOperation=function(e,t){this.worker_=new $w95b$import$Processor({operation:e,imageOps:this.operationType_===$w95b$var$RasterOperationType.IMAGE,queue:1,lib:t,threads:this.threads_}),this.changed()},t.prototype.updateFrameState_=function(e,t,r){var a=$w95b$import$assign({},this.frameState_);a.viewState=$w95b$import$assign({},a.viewState);var n=$w95b$import$getCenter(e);a.extent=e.slice(),a.size[0]=Math.round($w95b$import$getWidth(e)/t),a.size[1]=Math.round($w95b$import$getHeight(e)/t),a.time=1/0;var i=a.viewState;return i.center=n,i.projection=r,i.resolution=t,a},t.prototype.allSourcesReady_=function(){for(var e=!0,t=0,r=this.layers_.length;t<r;++t)if(this.layers_[t].getSource().getState()!==$w95b$import$SourceState.READY){e=!1;break}return e},t.prototype.getImage=function(e,t,r,a){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(e,t,a);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();t===i&&$w95b$import$equals(e,o)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},t.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),a=0;a<t;++a){e.layerIndex=a;var n=$w95b$var$getImageData(this.layers_[a],e);if(!n)return;r[a]=n}var i={};this.dispatchEvent(new $w95b$export$RasterSourceEvent($w95b$var$RasterEventType.BEFOREOPERATIONS,e,i)),this.worker_.process(r,i,this.onWorkerComplete_.bind(this,e))},t.prototype.onWorkerComplete_=function(e,t,r,a){if(!t&&r){var n=e.extent,i=e.viewState.resolution;if(i===this.requestedFrameState_.viewState.resolution&&$w95b$import$equals(n,this.requestedFrameState_.extent)){var o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext(\"2d\");else{var $=Math.round($w95b$import$getWidth(n)/i),s=Math.round($w95b$import$getHeight(n)/i);o=$w95b$import$createCanvasContext2D($,s),this.renderedImageCanvas_=new $w95b$import$ImageCanvas(n,i,1,o.canvas)}o.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new $w95b$export$RasterSourceEvent($w95b$var$RasterEventType.AFTEROPERATIONS,e,a))}}},t.prototype.getImageInternal=function(){return null},t}($w95b$import$ImageSource),$w95b$var$sharedContext=null;function $w95b$var$getImageData(e,t){var r=e.getRenderer();if(!r)throw new Error(\"Unsupported layer type: \"+e);if(!r.prepareFrame(t))return null;var a,n=t.size[0],i=t.size[1],o=r.renderFrame(t,null);if(o&&(a=o.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error(\"Unsupported rendered element: \"+a);if(a.width===n&&a.height===i)return a.getContext(\"2d\").getImageData(0,0,n,i);if($w95b$var$sharedContext){var $=$w95b$var$sharedContext.canvas;$.width!==n||$.height!==i?$w95b$var$sharedContext=$w95b$import$createCanvasContext2D(n,i):$w95b$var$sharedContext.clearRect(0,0,n,i)}else $w95b$var$sharedContext=$w95b$import$createCanvasContext2D(n,i);return $w95b$var$sharedContext.drawImage(a,0,0,n,i),$w95b$var$sharedContext.getImageData(0,0,n,i)}function $w95b$var$getLayerStatesArray(e){return e.map(function(e){return e.getLayerState()})}function $w95b$var$createLayers(e){for(var t=e.length,r=new Array(t),a=0;a<t;++a)r[a]=$w95b$var$createLayer(e[a]);return r}function $w95b$var$createLayer(e){var t;return e instanceof $w95b$import$Source?e instanceof $w95b$import$TileSource?t=new $w95b$import$TileLayer({source:e}):e instanceof $w95b$import$ImageSource&&(t=new $w95b$import$ImageLayer({source:e})):t=e,t}$w95b$exports.default=$w95b$export$default;"},"sourceMaps":null,"error":null,"hash":"4fd7e3f71a3dfe4794e73b6faa06de1d","cacheData":{"env":{},"imports":{"$w95b$import$ImageCanvas":["../ImageCanvas.js","default"],"$w95b$import$TileQueue":["../TileQueue.js","default"],"$w95b$import$createCanvasContext2D":["../dom.js","createCanvasContext2D"],"$w95b$import$Event":["../events/Event.js","default"],"$w95b$import$EventType":["../events/EventType.js","default"],"$w95b$import$Processor":["pixelworks/lib/index.js","Processor"],"$w95b$import$equals":["../extent.js","equals"],"$w95b$import$getCenter":["../extent.js","getCenter"],"$w95b$import$getHeight":["../extent.js","getHeight"],"$w95b$import$getWidth":["../extent.js","getWidth"],"$w95b$import$ImageLayer":["../layer/Image.js","default"],"$w95b$import$TileLayer":["../layer/Tile.js","default"],"$w95b$import$assign":["../obj.js","assign"],"$w95b$import$createTransform":["../transform.js","create"],"$w95b$import$ImageSource":["./Image.js","default"],"$w95b$import$TileSource":["./Tile.js","default"],"$w95b$import$SourceState":["./State.js","default"],"$w95b$import$Source":["./Source.js","default"]},"exports":{"RasterSourceEvent":"$w95b$export$RasterSourceEvent","default":"$w95b$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}