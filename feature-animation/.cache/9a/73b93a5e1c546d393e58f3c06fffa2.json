{"id":"qrxo","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../util.js","loc":{"line":17,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/util.js"},{"name":"../Collection.js","loc":{"line":18,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/Collection.js"},{"name":"../CollectionEventType.js","loc":{"line":19,"column":32},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/CollectionEventType.js"},{"name":"../Feature.js","loc":{"line":20,"column":20},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/Feature.js"},{"name":"../MapBrowserEventType.js","loc":{"line":21,"column":32},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/MapBrowserEventType.js"},{"name":"../array.js","loc":{"line":22,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/array.js"},{"name":"../coordinate.js","loc":{"line":23,"column":165},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/coordinate.js"},{"name":"../events/Event.js","loc":{"line":24,"column":18},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/Event.js"},{"name":"../events/EventType.js","loc":{"line":25,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/EventType.js"},{"name":"../events/condition.js","loc":{"line":26,"column":63},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/condition.js"},{"name":"../extent.js","loc":{"line":27,"column":101},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/extent.js"},{"name":"../geom/GeometryType.js","loc":{"line":28,"column":25},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/geom/GeometryType.js"},{"name":"../geom/Point.js","loc":{"line":29,"column":18},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/geom/Point.js"},{"name":"./Pointer.js","loc":{"line":30,"column":31},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Pointer.js"},{"name":"../layer/Vector.js","loc":{"line":31,"column":24},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/layer/Vector.js"},{"name":"../source/Vector.js","loc":{"line":32,"column":25},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/Vector.js"},{"name":"../source/VectorEventType.js","loc":{"line":33,"column":28},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/VectorEventType.js"},{"name":"../structs/RBush.js","loc":{"line":34,"column":18},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/structs/RBush.js"},{"name":"../style/Style.js","loc":{"line":35,"column":35},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/style/Style.js"},{"name":"../proj.js","loc":{"line":36,"column":83},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Modify.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/proj.js"}],"generated":{"js":"var $qrxo$exports={};$parcel$require(\"qrxo\",\"../util.js\"),$parcel$require(\"qrxo\",\"../Collection.js\"),$parcel$require(\"qrxo\",\"../CollectionEventType.js\"),$parcel$require(\"qrxo\",\"../Feature.js\"),$parcel$require(\"qrxo\",\"../MapBrowserEventType.js\"),$parcel$require(\"qrxo\",\"../array.js\"),$parcel$require(\"qrxo\",\"../coordinate.js\"),$parcel$require(\"qrxo\",\"../events/Event.js\"),$parcel$require(\"qrxo\",\"../events/EventType.js\"),$parcel$require(\"qrxo\",\"../events/condition.js\"),$parcel$require(\"qrxo\",\"../extent.js\"),$parcel$require(\"qrxo\",\"../geom/GeometryType.js\"),$parcel$require(\"qrxo\",\"../geom/Point.js\"),$parcel$require(\"qrxo\",\"./Pointer.js\"),$parcel$require(\"qrxo\",\"../layer/Vector.js\"),$parcel$require(\"qrxo\",\"../source/Vector.js\"),$parcel$require(\"qrxo\",\"../source/VectorEventType.js\"),$parcel$require(\"qrxo\",\"../structs/RBush.js\"),$parcel$require(\"qrxo\",\"../style/Style.js\"),$parcel$require(\"qrxo\",\"../proj.js\");var $qrxo$var$__extends=$qrxo$exports&&$qrxo$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$qrxo$var$CIRCLE_CENTER_INDEX=0,$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX=1,$qrxo$var$tempExtent=[0,0,0,0],$qrxo$var$tempSegment=[],$qrxo$var$ModifyEventType={MODIFYSTART:\"modifystart\",MODIFYEND:\"modifyend\"},$qrxo$export$ModifyEvent=function(e){function t(t,r,o){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=o,i}return $qrxo$var$__extends(t,e),t}($qrxo$import$Event);$qrxo$exports.ModifyEvent=$qrxo$export$ModifyEvent;var $qrxo$export$default=function(e){function t(t){var r,o=e.call(this,t)||this;if(o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=t.condition?t.condition:$qrxo$import$primaryAction,o.defaultDeleteCondition_=function(e){return $qrxo$import$altKeyOnly(e)&&$qrxo$import$singleClick(e)},o.deleteCondition_=t.deleteCondition?t.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:$qrxo$import$always,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.modified_=!1,o.rBush_=new $qrxo$import$RBush,o.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new $qrxo$import$VectorLayer({source:new $qrxo$import$VectorSource({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:$qrxo$var$getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,t.source?(o.source_=t.source,r=new $qrxo$import$Collection(o.source_.getFeatures()),o.source_.addEventListener($qrxo$import$VectorEventType.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener($qrxo$import$VectorEventType.REMOVEFEATURE,o.handleSourceRemove_.bind(o))):r=t.features,!r)throw new Error(\"The modify interaction requires features or a source\");return o.features_=r,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener($qrxo$import$CollectionEventType.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener($qrxo$import$CollectionEventType.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o}return $qrxo$var$__extends(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener($qrxo$import$EventType.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new $qrxo$export$ModifyEvent($qrxo$var$ModifyEventType.MODIFYSTART,this.features_,e)))},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener($qrxo$import$EventType.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var o=r.length-1;o>=0;--o){for(var i=r[o],n=this.dragSegments_.length-1;n>=0;--n)this.dragSegments_[n][0]===i&&this.dragSegments_.splice(n,1);t.remove(i)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),o={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o){var n=r[o],a={feature:e,geometry:t,depth:[o],index:o,segment:[n,n]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length-1;o<i;++o){var n=r.slice(o,o+2),a={feature:e,geometry:t,index:o,segment:n};this.rBush_.insert($qrxo$import$boundingExtent(n),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),p={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert($qrxo$import$boundingExtent($),p)}},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),p={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert($qrxo$import$boundingExtent($),p)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length;a<s;++a)for(var $=n[a],p=0,u=$.length-1;p<u;++p){var d=$.slice(p,p+2),m={feature:e,geometry:t,depth:[a,o],index:p,segment:d};this.rBush_.insert($qrxo$import$boundingExtent(d),m)}},t.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),o={feature:e,geometry:t,index:$qrxo$var$CIRCLE_CENTER_INDEX,segment:[r,r]},i={feature:e,geometry:t,index:$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX,segment:[r,r]},n=[o,i];o.featureSegments=n,i.featureSegments=n,this.rBush_.insert($qrxo$import$createExtent(r),o),this.rBush_.insert(t.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),o=0;o<r.length;++o){var i=r[o];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},t.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new $qrxo$import$Feature(new $qrxo$import$Point(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.pointerEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=$qrxo$import$MapBrowserEventType.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(r=!(t.type!=$qrxo$import$MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==$qrxo$import$MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!r);var r},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,o=this.dragSegments_.length;r<o;++r){for(var i=this.dragSegments_[r],n=i[0],a=n.depth,s=n.geometry,$=void 0,p=n.segment,u=i[1];t.length<s.getStride();)t.push(p[u][t.length]);switch(s.getType()){case $qrxo$import$GeometryType.POINT:$=t,p[0]=t,p[1]=t;break;case $qrxo$import$GeometryType.MULTI_POINT:($=s.getCoordinates())[n.index]=t,p[0]=t,p[1]=t;break;case $qrxo$import$GeometryType.LINE_STRING:($=s.getCoordinates())[n.index+u]=t,p[u]=t;break;case $qrxo$import$GeometryType.MULTI_LINE_STRING:case $qrxo$import$GeometryType.POLYGON:($=s.getCoordinates())[a[0]][n.index+u]=t,p[u]=t;break;case $qrxo$import$GeometryType.MULTI_POLYGON:($=s.getCoordinates())[a[1]][a[0]][n.index+u]=t,p[u]=t;break;case $qrxo$import$GeometryType.CIRCLE:p[0]=t,p[1]=t,n.index===$qrxo$var$CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,s.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius($qrxo$import$coordinateDistance(s.getCenter(),t)),this.changingFeature_=!1)}$&&this.setGeometryCoordinates_(s,$)}this.createOrUpdateVertexFeature_(t)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var t=e.coordinate;this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var o=e.map.getView().getProjection(),i=[],n=r.getGeometry().getCoordinates(),a=$qrxo$import$boundingExtent([n]),s=this.rBush_.getInExtent(a),$={};s.sort($qrxo$var$compareIndexes);for(var p=0,u=s.length;p<u;++p){var d=s[p],m=d.segment,x=$qrxo$import$getUid(d.feature),g=d.depth;if(g&&(x+=\"-\"+g.join(\"-\")),$[x]||($[x]=new Array(2)),d.geometry.getType()!==$qrxo$import$GeometryType.CIRCLE||d.index!==$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX)if(!$qrxo$import$coordinatesEqual(m[0],n)||$[x][0])if(!$qrxo$import$coordinatesEqual(m[1],n)||$[x][1])$qrxo$import$getUid(m)in this.vertexSegments_&&!$[x][0]&&!$[x][1]&&this.insertVertexCondition_(e)&&i.push([d,n]);else{if((d.geometry.getType()===$qrxo$import$GeometryType.LINE_STRING||d.geometry.getType()===$qrxo$import$GeometryType.MULTI_LINE_STRING)&&$[x][0]&&0===$[x][0].index)continue;this.dragSegments_.push([d,1]),$[x][1]=d}else this.dragSegments_.push([d,0]),$[x][0]=d;else{var h=$qrxo$var$closestOnSegmentData(t,d,o);$qrxo$import$coordinatesEqual(h,n)&&!$[x][0]&&(this.dragSegments_.push([d,0]),$[x][0]=d)}}i.length&&this.willModifyFeatures_(e);for(var l=i.length-1;l>=0;--l)this.insertVertex_.apply(this,i[l])}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],o=r.geometry;if(o.getType()===$qrxo$import$GeometryType.CIRCLE){var i=o.getCenter(),n=r.featureSegments[0],a=r.featureSegments[1];n.segment[0]=i,n.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update($qrxo$import$createExtent(i),n),this.rBush_.update(o.getExtent(),a)}else this.rBush_.update($qrxo$import$boundingExtent(r.segment),r)}return this.modified_&&(this.dispatchEvent(new $qrxo$export$ModifyEvent($qrxo$var$ModifyEventType.MODIFYEND,this.features_,e)),this.modified_=!1),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},t.prototype.handlePointerAtPixel_=function(e,t){var r=t.getCoordinateFromPixel(e),o=t.getView().getProjection(),i=$qrxo$import$fromUserExtent($qrxo$import$createExtent(r,$qrxo$var$tempExtent),o),n=t.getView().getResolution()*this.pixelTolerance_,a=$qrxo$import$toUserExtent($qrxo$import$bufferExtent(i,n,$qrxo$var$tempExtent),o),s=this.rBush_.getInExtent(a);if(s.length>0){s.sort(function(e,t){return $qrxo$var$projectedDistanceToSegmentDataSquared(r,e,o)-$qrxo$var$projectedDistanceToSegmentDataSquared(r,t,o)});var $=s[0],p=$.segment,u=$qrxo$var$closestOnSegmentData(r,$,o),d=t.getPixelFromCoordinate(u),m=$qrxo$import$coordinateDistance(e,d);if(m<=this.pixelTolerance_){var x={};if($.geometry.getType()===$qrxo$import$GeometryType.CIRCLE&&$.index===$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var g=t.getPixelFromCoordinate(p[0]),h=t.getPixelFromCoordinate(p[1]),l=$qrxo$import$squaredCoordinateDistance(d,g),_=$qrxo$import$squaredCoordinateDistance(d,h);m=Math.sqrt(Math.min(l,_)),this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_&&(u=l>_?p[1]:p[0]),this.createOrUpdateVertexFeature_(u);for(var c=1,v=s.length;c<v;++c){var y=s[c].segment;if(!($qrxo$import$coordinatesEqual(p[0],y[0])&&$qrxo$import$coordinatesEqual(p[1],y[1])||$qrxo$import$coordinatesEqual(p[0],y[1])&&$qrxo$import$coordinatesEqual(p[1],y[0])))break;x[$qrxo$import$getUid(y)]=!0}}return x[$qrxo$import$getUid(p)]=!0,void(this.vertexSegments_=x)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var r,o=e.segment,i=e.feature,n=e.geometry,a=e.depth,s=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case $qrxo$import$GeometryType.MULTI_LINE_STRING:case $qrxo$import$GeometryType.POLYGON:(r=n.getCoordinates())[a[0]].splice(s+1,0,t);break;case $qrxo$import$GeometryType.MULTI_POLYGON:(r=n.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case $qrxo$import$GeometryType.LINE_STRING:(r=n.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(n,r);var $=this.rBush_;$.remove(e),this.updateSegmentIndices_(n,s,a,1);var p={segment:[o[0],t],feature:i,geometry:n,depth:a,index:s};$.insert($qrxo$import$boundingExtent(p.segment),p),this.dragSegments_.push([p,1]);var u={segment:[t,o[1]],feature:i,geometry:n,depth:a,index:s+1};$.insert($qrxo$import$boundingExtent(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=$qrxo$import$MapBrowserEventType.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var t=this.removeVertex_();return this.dispatchEvent(new $qrxo$export$ModifyEvent($qrxo$var$ModifyEventType.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1},t.prototype.removeVertex_=function(){var e,t,r,o,i,n,a,s,$,p,u,d=this.dragSegments_,m={},x=!1;for(i=d.length-1;i>=0;--i)p=(r=d[i])[0],u=$qrxo$import$getUid(p.feature),p.depth&&(u+=\"-\"+p.depth.join(\"-\")),u in m||(m[u]={}),0===r[1]?(m[u].right=p,m[u].index=p.index):1==r[1]&&(m[u].left=p,m[u].index=p.index+1);for(u in m){switch($=m[u].right,a=m[u].left,(s=(n=m[u].index)-1)<0&&(s=0),e=t=(o=(p=void 0!==a?a:$).geometry).getCoordinates(),x=!1,o.getType()){case $qrxo$import$GeometryType.MULTI_LINE_STRING:t[p.depth[0]].length>2&&(t[p.depth[0]].splice(n,1),x=!0);break;case $qrxo$import$GeometryType.LINE_STRING:t.length>2&&(t.splice(n,1),x=!0);break;case $qrxo$import$GeometryType.MULTI_POLYGON:e=e[p.depth[1]];case $qrxo$import$GeometryType.POLYGON:(e=e[p.depth[0]]).length>4&&(n==e.length-1&&(n=0),e.splice(n,1),x=!0,0===n&&(e.pop(),e.push(e[0]),s=e.length-1))}if(x){this.setGeometryCoordinates_(o,t);var g=[];if(void 0!==a&&(this.rBush_.remove(a),g.push(a.segment[0])),void 0!==$&&(this.rBush_.remove($),g.push($.segment[1])),void 0!==a&&void 0!==$){var h={depth:p.depth,feature:p.feature,geometry:p.geometry,index:s,segment:g};this.rBush_.insert($qrxo$import$boundingExtent(h.segment),h)}this.updateSegmentIndices_(o,n,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return x},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||$qrxo$import$equals(i.depth,r))&&i.index>t&&(i.index+=o)})},t}($qrxo$import$PointerInteraction);function $qrxo$var$compareIndexes(e,t){return e.index-t.index}function $qrxo$var$projectedDistanceToSegmentDataSquared(e,t,r){var o=t.geometry;if(o.getType()===$qrxo$import$GeometryType.CIRCLE){var i=o;if(t.index===$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX){var n=$qrxo$import$squaredCoordinateDistance(i.getCenter(),e),a=Math.sqrt(n)-i.getRadius();return a*a}}var s=$qrxo$import$fromUserCoordinate(e,r);return $qrxo$var$tempSegment[0]=$qrxo$import$fromUserCoordinate(t.segment[0],r),$qrxo$var$tempSegment[1]=$qrxo$import$fromUserCoordinate(t.segment[1],r),$qrxo$import$squaredDistanceToSegment(s,$qrxo$var$tempSegment)}function $qrxo$var$closestOnSegmentData(e,t,r){var o=t.geometry;if(o.getType()===$qrxo$import$GeometryType.CIRCLE&&t.index===$qrxo$var$CIRCLE_CIRCUMFERENCE_INDEX)return o.getClosestPoint(e);var i=$qrxo$import$fromUserCoordinate(e,r);return $qrxo$var$tempSegment[0]=$qrxo$import$fromUserCoordinate(t.segment[0],r),$qrxo$var$tempSegment[1]=$qrxo$import$fromUserCoordinate(t.segment[1],r),$qrxo$import$toUserCoordinate($qrxo$import$closestOnSegment(i,$qrxo$var$tempSegment),r)}function $qrxo$var$getDefaultStyleFunction(){var e=$qrxo$import$createEditingStyle();return function(t,r){return e[$qrxo$import$GeometryType.POINT]}}$qrxo$exports.default=$qrxo$export$default;"},"sourceMaps":null,"error":null,"hash":"270590e5cf9fab426dcc11bb43df065c","cacheData":{"env":{},"imports":{"$qrxo$import$getUid":["../util.js","getUid"],"$qrxo$import$Collection":["../Collection.js","default"],"$qrxo$import$CollectionEventType":["../CollectionEventType.js","default"],"$qrxo$import$Feature":["../Feature.js","default"],"$qrxo$import$MapBrowserEventType":["../MapBrowserEventType.js","default"],"$qrxo$import$equals":["../array.js","equals"],"$qrxo$import$coordinatesEqual":["../coordinate.js","equals"],"$qrxo$import$coordinateDistance":["../coordinate.js","distance"],"$qrxo$import$squaredCoordinateDistance":["../coordinate.js","squaredDistance"],"$qrxo$import$squaredDistanceToSegment":["../coordinate.js","squaredDistanceToSegment"],"$qrxo$import$closestOnSegment":["../coordinate.js","closestOnSegment"],"$qrxo$import$Event":["../events/Event.js","default"],"$qrxo$import$EventType":["../events/EventType.js","default"],"$qrxo$import$always":["../events/condition.js","always"],"$qrxo$import$primaryAction":["../events/condition.js","primaryAction"],"$qrxo$import$altKeyOnly":["../events/condition.js","altKeyOnly"],"$qrxo$import$singleClick":["../events/condition.js","singleClick"],"$qrxo$import$boundingExtent":["../extent.js","boundingExtent"],"$qrxo$import$bufferExtent":["../extent.js","buffer"],"$qrxo$import$createExtent":["../extent.js","createOrUpdateFromCoordinate"],"$qrxo$import$GeometryType":["../geom/GeometryType.js","default"],"$qrxo$import$Point":["../geom/Point.js","default"],"$qrxo$import$PointerInteraction":["./Pointer.js","default"],"$qrxo$import$VectorLayer":["../layer/Vector.js","default"],"$qrxo$import$VectorSource":["../source/Vector.js","default"],"$qrxo$import$VectorEventType":["../source/VectorEventType.js","default"],"$qrxo$import$RBush":["../structs/RBush.js","default"],"$qrxo$import$createEditingStyle":["../style/Style.js","createEditingStyle"],"$qrxo$import$fromUserExtent":["../proj.js","fromUserExtent"],"$qrxo$import$toUserExtent":["../proj.js","toUserExtent"],"$qrxo$import$fromUserCoordinate":["../proj.js","fromUserCoordinate"],"$qrxo$import$toUserCoordinate":["../proj.js","toUserCoordinate"]},"exports":{"ModifyEvent":"$qrxo$export$ModifyEvent","default":"$qrxo$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}