{"id":"hkMV","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../../util.js","loc":{"line":17,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/util.js"},{"name":"../../proj.js","loc":{"line":18,"column":31},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/proj.js"},{"name":"../../TileRange.js","loc":{"line":19,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/TileRange.js"},{"name":"../../TileState.js","loc":{"line":20,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/TileState.js"},{"name":"../../extent.js","loc":{"line":21,"column":65},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/extent.js"},{"name":"./Layer.js","loc":{"line":22,"column":32},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/Layer.js"},{"name":"../../transform.js","loc":{"line":23,"column":82},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/transform.js"},{"name":"../../array.js","loc":{"line":24,"column":42},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/renderer/canvas/TileLayer.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/array.js"}],"generated":{"js":"var $hkMV$exports={};$parcel$require(\"hkMV\",\"../../util.js\"),$parcel$require(\"hkMV\",\"../../proj.js\"),$parcel$require(\"hkMV\",\"../../TileRange.js\"),$parcel$require(\"hkMV\",\"../../TileState.js\"),$parcel$require(\"hkMV\",\"../../extent.js\"),$parcel$require(\"hkMV\",\"./Layer.js\"),$parcel$require(\"hkMV\",\"../../transform.js\"),$parcel$require(\"hkMV\",\"../../array.js\");var $hkMV$var$__extends=$hkMV$exports&&$hkMV$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$hkMV$export$default=function(e){function t(t){var r=e.call(this,t)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=$hkMV$import$createEmpty(),r.tmpTileRange_=new $hkMV$import$TileRange(0,0,0,0),r}return $hkMV$var$__extends(t,e),t.prototype.isDrawableTile=function(e){var t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==$hkMV$import$TileState.LOADED||r==$hkMV$import$TileState.EMPTY||r==$hkMV$import$TileState.ERROR&&!i},t.prototype.getTile=function(e,t,r,i){var o=i.pixelRatio,n=i.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(e,t,r,o,n);return s.getState()==$hkMV$import$TileState.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState($hkMV$import$TileState.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},t.prototype.loadedTileCallback=function(t,r,i){return!!this.isDrawableTile(i)&&e.prototype.loadedTileCallback.call(this,t,r,i)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,t){var r=e.layerStatesArray[e.layerIndex],i=e.viewState,o=i.projection,n=i.resolution,a=i.center,s=i.rotation,l=e.pixelRatio,h=this.getLayer(),p=h.getSource(),$=p.getRevision(),d=p.getTileGridForProjection(o),u=d.getZForResolution(n,p.zDirection),c=d.getResolution(u),g=e.extent,T=r.extent&&$hkMV$import$fromUserExtent(r.extent,o);T&&(g=$hkMV$import$getIntersection(g,$hkMV$import$fromUserExtent(r.extent,o)));var m=p.getTilePixelRatio(l),f=Math.round(e.size[0]*m),v=Math.round(e.size[1]*m);if(s){var x=Math.round(Math.sqrt(f*f+v*v));f=x,v=x}var M=c*f/2/m,k=c*v/2/m,y=[a[0]-M,a[1]-k,a[0]+M,a[1]+k],V=d.getTileRangeForExtentAndZ(g,u),R={};R[u]={};var _=this.createLoadedTileFinder(p,o,R),w=this.tmpExtent,C=this.tmpTileRange_;this.newTiles_=!1;for(var S=V.minX;S<=V.maxX;++S)for(var E=V.minY;E<=V.maxY;++E){var j=this.getTile(u,S,E,e);if(this.isDrawableTile(j)){var P=$hkMV$import$getUid(this);if(j.getState()==$hkMV$import$TileState.LOADED){R[u][j.tileCoord.toString()]=j;var b=j.inTransition(P);this.newTiles_||!b&&-1!==this.renderedTiles.indexOf(j)||(this.newTiles_=!0)}if(1===j.getAlpha(P,e.time))continue}var O=d.getTileCoordChildTileRange(j.tileCoord,C,w),I=!1;O&&(I=_(u+1,O)),I||d.forEachTileCoordParentTileRange(j.tileCoord,_,C,w)}var U=c/n;$hkMV$import$composeTransform(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/m,1/m,s,-f/2,-v/2);var A=this.createTransformString(this.pixelTransform);this.useContainer(t,A,r.opacity);var L=this.context,q=L.canvas;$hkMV$import$makeInverse(this.inversePixelTransform,this.pixelTransform),$hkMV$import$composeTransform(this.tempTransform_,f/2,v/2,U,U,0,-f/2,-v/2),q.width!=f||q.height!=v?(q.width=f,q.height=v):this.containerReused||L.clearRect(0,0,f,v),T&&this.clipUnrotated(L,e,T),this.preRender(L,e),this.renderedTiles.length=0;var D,F,z,Y=Object.keys(R).map(Number);Y.sort($hkMV$import$numberSafeCompareFunction),1!==r.opacity||this.containerReused&&!p.getOpaque(e.viewState.projection)?(D=[],F=[]):Y=Y.reverse();for(var Z=Y.length-1;Z>=0;--Z){var K=Y[Z],X=p.getTilePixelSize(K,l,o),G=d.getResolution(K)/c,Q=X[0]*G*U,W=X[1]*G*U,N=d.getTileCoordForCoordAndZ($hkMV$import$getTopLeft(y),K),B=d.getTileCoordExtent(N),H=$hkMV$import$applyTransform(this.tempTransform_,[m*(B[0]-y[0])/c,m*(y[3]-B[3])/c]),J=m*p.getGutterForProjection(o),ee=R[K];for(var te in ee){var re=(j=ee[te]).tileCoord,ie=H[0]-(N[1]-re[1])*Q,oe=Math.round(ie+Q),ne=H[1]-(N[2]-re[2])*W,ae=Math.round(ne+W),se=oe-(S=Math.round(ie)),le=ae-(E=Math.round(ne)),he=u===K;if(!(b=he&&1!==j.getAlpha($hkMV$import$getUid(this),e.time)))if(D){L.save(),z=[S,E,S+se,E,S+se,E+le,S,E+le];for(var pe=0,$e=D.length;pe<$e;++pe)if(u!==K&&K<F[pe]){var de=D[pe];L.beginPath(),L.moveTo(z[0],z[1]),L.lineTo(z[2],z[3]),L.lineTo(z[4],z[5]),L.lineTo(z[6],z[7]),L.moveTo(de[6],de[7]),L.lineTo(de[4],de[5]),L.lineTo(de[2],de[3]),L.lineTo(de[0],de[1]),L.clip()}D.push(z),F.push(K)}else L.clearRect(S,E,se,le);this.drawTileImage(j,e,S,E,se,le,J,he,r.opacity),D&&!b&&L.restore(),this.renderedTiles.push(j),this.updateUsedTiles(e.usedTiles,p,j)}}return this.renderedRevision=$,this.renderedResolution=c,this.extentChanged=!this.renderedExtent_||!$hkMV$import$equals(this.renderedExtent_,y),this.renderedExtent_=y,this.renderedPixelRatio=l,this.renderedProjection=o,this.manageTilePyramid(e,p,d,l,o,g,u,h.getPreload()),this.updateCacheSize_(e,p),this.scheduleExpireCache(e,p),this.postRender(L,e),r.extent&&L.restore(),A!==q.style.transform&&(q.style.transform=A),this.container},t.prototype.drawTileImage=function(e,t,r,i,o,n,a,s,l){var h=this.getTileImage(e);if(h){var p=$hkMV$import$getUid(this),$=s?e.getAlpha(p,t.time):1,d=l*$,u=d!==this.context.globalAlpha;u&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(h,a,a,h.width-2*a,h.height-2*a,r,i,o,n),u&&this.context.restore(),1!==$?t.animate=!0:s&&e.endTransition(p)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=$hkMV$import$getUid(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}},t.prototype.updateUsedTiles=function(e,t,r){var i=$hkMV$import$getUid(t);i in e||(e[i]={}),e[i][r.getKey()]=!0},t.prototype.updateCacheSize_=function(e,t){var r=$hkMV$import$getUid(t),i=0;r in e.usedTiles&&(i+=Object.keys(e.usedTiles[r]).length),r in e.wantedTiles&&(i+=Object.keys(e.wantedTiles[r]).length);var o=t.tileCache;o.highWaterMark<i&&(o.highWaterMark=i)},t.prototype.manageTilePyramid=function(e,t,r,i,o,n,a,s,l){var h=$hkMV$import$getUid(t);h in e.wantedTiles||(e.wantedTiles[h]={});var p,$,d,u,c,g,T=e.wantedTiles[h],m=e.tileQueue;for(g=r.getMinZoom();g<=a;++g)for($=r.getTileRangeForExtentAndZ(n,g,$),d=r.getResolution(g),u=$.minX;u<=$.maxX;++u)for(c=$.minY;c<=$.maxY;++c)a-g<=s?((p=t.getTile(g,u,c,i,o)).getState()==$hkMV$import$TileState.IDLE&&(T[p.getKey()]=!0,m.isKeyQueued(p.getKey())||m.enqueue([p,h,r.getTileCoordCenter(p.tileCoord),d])),void 0!==l&&l(p)):t.useTile(g,u,c,o)},t}($hkMV$import$CanvasLayerRenderer);$hkMV$export$default.prototype.getLayer,$hkMV$exports.default=$hkMV$export$default;"},"sourceMaps":null,"error":null,"hash":"222791e6913e67fc67768916d39bb7c7","cacheData":{"env":{},"imports":{"$hkMV$import$getUid":["../../util.js","getUid"],"$hkMV$import$fromUserExtent":["../../proj.js","fromUserExtent"],"$hkMV$import$TileRange":["../../TileRange.js","default"],"$hkMV$import$TileState":["../../TileState.js","default"],"$hkMV$import$createEmpty":["../../extent.js","createEmpty"],"$hkMV$import$equals":["../../extent.js","equals"],"$hkMV$import$getIntersection":["../../extent.js","getIntersection"],"$hkMV$import$getTopLeft":["../../extent.js","getTopLeft"],"$hkMV$import$CanvasLayerRenderer":["./Layer.js","default"],"$hkMV$import$applyTransform":["../../transform.js","apply"],"$hkMV$import$composeTransform":["../../transform.js","compose"],"$hkMV$import$makeInverse":["../../transform.js","makeInverse"],"$hkMV$import$numberSafeCompareFunction":["../../array.js","numberSafeCompareFunction"]},"exports":{"default":"$hkMV$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}