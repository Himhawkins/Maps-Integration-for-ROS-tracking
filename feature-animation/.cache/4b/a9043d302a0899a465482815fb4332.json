{"id":"NnGW","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../util.js","loc":{"line":17,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/util.js"},{"name":"../CollectionEventType.js","loc":{"line":18,"column":32},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/CollectionEventType.js"},{"name":"../coordinate.js","loc":{"line":19,"column":154},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/coordinate.js"},{"name":"../events.js","loc":{"line":20,"column":38},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events.js"},{"name":"../events/EventType.js","loc":{"line":21,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/events/EventType.js"},{"name":"../extent.js","loc":{"line":22,"column":44},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/extent.js"},{"name":"../functions.js","loc":{"line":23,"column":28},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/functions.js"},{"name":"../geom/GeometryType.js","loc":{"line":24,"column":25},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/geom/GeometryType.js"},{"name":"../geom/Polygon.js","loc":{"line":25,"column":27},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/geom/Polygon.js"},{"name":"./Pointer.js","loc":{"line":26,"column":31},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Pointer.js"},{"name":"../obj.js","loc":{"line":27,"column":26},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/obj.js"},{"name":"../source/VectorEventType.js","loc":{"line":28,"column":28},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/source/VectorEventType.js"},{"name":"../structs/RBush.js","loc":{"line":29,"column":18},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/structs/RBush.js"},{"name":"../proj.js","loc":{"line":30,"column":53},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/interaction/Snap.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/proj.js"}],"generated":{"js":"var $NnGW$exports={};$parcel$require(\"NnGW\",\"../util.js\"),$parcel$require(\"NnGW\",\"../CollectionEventType.js\"),$parcel$require(\"NnGW\",\"../coordinate.js\"),$parcel$require(\"NnGW\",\"../events.js\"),$parcel$require(\"NnGW\",\"../events/EventType.js\"),$parcel$require(\"NnGW\",\"../extent.js\"),$parcel$require(\"NnGW\",\"../functions.js\"),$parcel$require(\"NnGW\",\"../geom/GeometryType.js\"),$parcel$require(\"NnGW\",\"../geom/Polygon.js\"),$parcel$require(\"NnGW\",\"./Pointer.js\"),$parcel$require(\"NnGW\",\"../obj.js\"),$parcel$require(\"NnGW\",\"../source/VectorEventType.js\"),$parcel$require(\"NnGW\",\"../structs/RBush.js\"),$parcel$require(\"NnGW\",\"../proj.js\");var $NnGW$var$__extends=$NnGW$exports&&$NnGW$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function $NnGW$var$getFeatureFromEvent(e){return e.feature?e.feature:e.element?e.element:void 0}var $NnGW$var$tempSegment=[],$NnGW$export$default=function(e){function t(t){var r=this,n=t||{},o=n;return o.handleDownEvent||(o.handleDownEvent=$NnGW$import$TRUE),o.stopDown||(o.stopDown=$NnGW$import$FALSE),(r=e.call(this,o)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new $NnGW$import$RBush,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return $NnGW$var$__extends(t,e),t.prototype.addFeature=function(e,t){var r=void 0===t||t,n=$NnGW$import$getUid(e),o=e.getGeometry();if(o){var i=this.SEGMENT_WRITERS_[o.getType()];i&&(this.indexedFeaturesExtents_[n]=o.getExtent($NnGW$import$createEmpty()),i(e,o))}r&&(this.featureChangeListenerKeys_[n]=$NnGW$import$listen(e,$NnGW$import$EventType.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var r=this.snapTo(t.pixel,t.coordinate,t.map);return r.snapped&&(t.coordinate=r.vertex.slice(0,2),t.pixel=r.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=$NnGW$var$getFeatureFromEvent(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=$NnGW$var$getFeatureFromEvent(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=$NnGW$import$getUid(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=$NnGW$import$getValues(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=$NnGW$import$getUid(e),o=this.indexedFeaturesExtents_[n];if(o){var i=this.rBush_,a=[];i.forEachInExtent(o,function(t){e===t.feature&&a.push(t)});for(var s=a.length-1;s>=0;--s)i.remove(a[s])}r&&($NnGW$import$unlistenByKey(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},t.prototype.setMap=function(t){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach($NnGW$import$unlistenByKey),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?n.push($NnGW$import$listen(this.features_,$NnGW$import$CollectionEventType.ADD,this.handleFeatureAdd_,this),$NnGW$import$listen(this.features_,$NnGW$import$CollectionEventType.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push($NnGW$import$listen(this.source_,$NnGW$import$VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this),$NnGW$import$listen(this.source_,$NnGW$import$VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,r){var n=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),i=$NnGW$import$boundingExtent([n,o]),a=this.rBush_.getInExtent(i);this.vertex_&&!this.edge_&&(a=a.filter(function(e){return e.feature.getGeometry().getType()!==$NnGW$import$GeometryType.CIRCLE}));var s=!1,$=null,u=null;if(0===a.length)return{snapped:s,vertex:$,vertexPixel:u};for(var p,l=r.getView().getProjection(),h=$NnGW$import$fromUserCoordinate(t,l),m=1/0,d=0;d<a.length;++d){var c=a[d];$NnGW$var$tempSegment[0]=$NnGW$import$fromUserCoordinate(c.segment[0],l),$NnGW$var$tempSegment[1]=$NnGW$import$fromUserCoordinate(c.segment[1],l);var g=$NnGW$import$squaredDistanceToSegment(h,$NnGW$var$tempSegment);g<m&&(p=c,m=g)}var G=p.segment;if(this.vertex_&&!this.edge_){var _=r.getPixelFromCoordinate(G[0]),v=r.getPixelFromCoordinate(G[1]),f=$NnGW$import$squaredCoordinateDistance(e,_),y=$NnGW$import$squaredCoordinateDistance(e,v);Math.sqrt(Math.min(f,y))<=this.pixelTolerance_&&(s=!0,$=f>y?G[1]:G[0],u=r.getPixelFromCoordinate($))}else if(this.edge_){var N=p.feature.getGeometry().getType()===$NnGW$import$GeometryType.CIRCLE;if(N?$=$NnGW$import$closestOnCircle(t,p.feature.getGeometry()):($NnGW$var$tempSegment[0]=$NnGW$import$fromUserCoordinate(G[0],l),$NnGW$var$tempSegment[1]=$NnGW$import$fromUserCoordinate(G[1],l),$=$NnGW$import$toUserCoordinate($NnGW$import$closestOnSegment(h,$NnGW$var$tempSegment),l)),u=r.getPixelFromCoordinate($),$NnGW$import$coordinateDistance(e,u)<=this.pixelTolerance_&&(s=!0,this.vertex_&&!N)){_=r.getPixelFromCoordinate(G[0]),v=r.getPixelFromCoordinate(G[1]),f=$NnGW$import$squaredCoordinateDistance(u,_),y=$NnGW$import$squaredCoordinateDistance(u,v);Math.sqrt(Math.min(f,y))<=this.pixelTolerance_&&($=f>y?G[1]:G[0],u=r.getPixelFromCoordinate($))}}return s&&(u=[Math.round(u[0]),Math.round(u[1])]),{snapped:s,vertex:$,vertexPixel:u}},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.writeCircleGeometry_=function(e,t){for(var r=$NnGW$import$fromCircle(t).getCoordinates()[0],n=0,o=r.length-1;n<o;++n){var i=r.slice(n,n+2),a={feature:e,segment:i};this.rBush_.insert($NnGW$import$boundingExtent(i),a)}},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var o=this.SEGMENT_WRITERS_[r[n].getType()];o&&o(e,r[n])}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length-1;n<o;++n){var i=r.slice(n,n+2),a={feature:e,segment:i};this.rBush_.insert($NnGW$import$boundingExtent(i),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length-1;a<s;++a){var $=i.slice(a,a+2),u={feature:e,segment:$};this.rBush_.insert($NnGW$import$boundingExtent($),u)}},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n){var i=r[n],a={feature:e,segment:[i,i]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length;a<s;++a)for(var $=i[a],u=0,p=$.length-1;u<p;++u){var l=$.slice(u,u+2),h={feature:e,segment:l};this.rBush_.insert($NnGW$import$boundingExtent(l),h)}},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length-1;a<s;++a){var $=i.slice(a,a+2),u={feature:e,segment:$};this.rBush_.insert($NnGW$import$boundingExtent($),u)}},t}($NnGW$import$PointerInteraction);$NnGW$exports.default=$NnGW$export$default;"},"sourceMaps":null,"error":null,"hash":"3c2b94e4a1fcf8495b2c8ff5726a943c","cacheData":{"env":{},"imports":{"$NnGW$import$getUid":["../util.js","getUid"],"$NnGW$import$CollectionEventType":["../CollectionEventType.js","default"],"$NnGW$import$coordinateDistance":["../coordinate.js","distance"],"$NnGW$import$squaredCoordinateDistance":["../coordinate.js","squaredDistance"],"$NnGW$import$closestOnCircle":["../coordinate.js","closestOnCircle"],"$NnGW$import$closestOnSegment":["../coordinate.js","closestOnSegment"],"$NnGW$import$squaredDistanceToSegment":["../coordinate.js","squaredDistanceToSegment"],"$NnGW$import$listen":["../events.js","listen"],"$NnGW$import$unlistenByKey":["../events.js","unlistenByKey"],"$NnGW$import$EventType":["../events/EventType.js","default"],"$NnGW$import$boundingExtent":["../extent.js","boundingExtent"],"$NnGW$import$createEmpty":["../extent.js","createEmpty"],"$NnGW$import$TRUE":["../functions.js","TRUE"],"$NnGW$import$FALSE":["../functions.js","FALSE"],"$NnGW$import$GeometryType":["../geom/GeometryType.js","default"],"$NnGW$import$fromCircle":["../geom/Polygon.js","fromCircle"],"$NnGW$import$PointerInteraction":["./Pointer.js","default"],"$NnGW$import$getValues":["../obj.js","getValues"],"$NnGW$import$VectorEventType":["../source/VectorEventType.js","default"],"$NnGW$import$RBush":["../structs/RBush.js","default"],"$NnGW$import$fromUserCoordinate":["../proj.js","fromUserCoordinate"],"$NnGW$import$toUserCoordinate":["../proj.js","toUserCoordinate"]},"exports":{"default":"$NnGW$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}