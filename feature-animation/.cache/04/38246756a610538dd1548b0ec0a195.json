{"id":"w1WE","dependencies":[{"name":"/home/pranav/Project Maps/feature-animation/package.json","includedInParent":true,"mtime":1575650386924},{"name":"/home/pranav/Project Maps/feature-animation/node_modules/ol/package.json","includedInParent":true,"mtime":1575545100323},{"name":"../util.js","loc":{"line":17,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/util.js"},{"name":"../Disposable.js","loc":{"line":18,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/Disposable.js"},{"name":"../obj.js","loc":{"line":19,"column":22},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/obj.js"},{"name":"../webgl/ContextEventType.js","loc":{"line":20,"column":29},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/ContextEventType.js"},{"name":"../transform.js","loc":{"line":21,"column":148},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/transform.js"},{"name":"../vec/mat4.js","loc":{"line":22,"column":38},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/vec/mat4.js"},{"name":"./PostProcessingPass.js","loc":{"line":23,"column":36},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/PostProcessingPass.js"},{"name":"../webgl.js","loc":{"line":24,"column":103},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl.js"},{"name":"../array.js","loc":{"line":25,"column":25},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/array.js"},{"name":"../asserts.js","loc":{"line":26,"column":23},"parent":"/home/pranav/Project Maps/feature-animation/node_modules/ol/webgl/Helper.js","resolved":"/home/pranav/Project Maps/feature-animation/node_modules/ol/asserts.js"}],"generated":{"js":"var $w1WE$exports={};$parcel$require(\"w1WE\",\"../util.js\"),$parcel$require(\"w1WE\",\"../Disposable.js\"),$parcel$require(\"w1WE\",\"../obj.js\"),$parcel$require(\"w1WE\",\"../webgl/ContextEventType.js\"),$parcel$require(\"w1WE\",\"../transform.js\"),$parcel$require(\"w1WE\",\"../vec/mat4.js\"),$parcel$require(\"w1WE\",\"./PostProcessingPass.js\"),$parcel$require(\"w1WE\",\"../webgl.js\"),$parcel$require(\"w1WE\",\"../array.js\"),$parcel$require(\"w1WE\",\"../asserts.js\");var $w1WE$var$__extends=$w1WE$exports&&$w1WE$exports.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$w1WE$export$ShaderType={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};$w1WE$exports.ShaderType=$w1WE$export$ShaderType;var $w1WE$export$DefaultUniform={PROJECTION_MATRIX:\"u_projectionMatrix\",OFFSET_SCALE_MATRIX:\"u_offsetScaleMatrix\",OFFSET_ROTATION_MATRIX:\"u_offsetRotateMatrix\",TIME:\"u_time\",ZOOM:\"u_zoom\",RESOLUTION:\"u_resolution\"};$w1WE$exports.DefaultUniform=$w1WE$export$DefaultUniform;var $w1WE$export$AttributeType={UNSIGNED_BYTE:$w1WE$import$UNSIGNED_BYTE,UNSIGNED_SHORT:$w1WE$import$UNSIGNED_SHORT,UNSIGNED_INT:$w1WE$import$UNSIGNED_INT,FLOAT:$w1WE$import$FLOAT};$w1WE$exports.AttributeType=$w1WE$export$AttributeType;var $w1WE$export$default=function(t){function e(e){var r=t.call(this)||this,o=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement(\"canvas\"),r.canvas_.style.position=\"absolute\",r.canvas_.style.left=\"0\",r.gl_=$w1WE$import$getContext(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,$w1WE$import$assert($w1WE$import$includes($w1WE$import$getSupportedExtensions(),\"OES_element_index_uint\"),63),i.getExtension(\"OES_element_index_uint\"),r.canvas_.addEventListener($w1WE$import$ContextEventType.LOST,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener($w1WE$import$ContextEventType.RESTORED,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=$w1WE$import$createTransform(),r.offsetScaleMatrix_=$w1WE$import$createTransform(),r.tmpMat4_=$w1WE$import$create(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],o.uniforms)for(var a in o.uniforms)r.uniforms_.push({name:a,value:o.uniforms[a]});return r.postProcessPasses_=o.postProcesses?o.postProcesses.map(function(t){return new $w1WE$import$WebGLPostProcessingPass({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})}):[new $w1WE$import$WebGLPostProcessingPass({webGlContext:i})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return $w1WE$var$__extends(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),r=$w1WE$import$getUid(t),o=this.bufferCache_[r];o||(o={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=o);e.bindBuffer(t.getType(),o.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=$w1WE$import$getUid(t),o=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(o.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener($w1WE$import$ContextEventType.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener($w1WE$import$ContextEventType.RESTORED,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),r=this.getCanvas(),o=t.size,i=t.pixelRatio;r.width=o[0]*i,r.height=o[1]*i,r.style.width=o[0]+\"px\",r.style.height=o[1]+\"px\",e.useProgram(this.currentProgram_);for(var a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var o=this.getGL(),i=e.getSize();o.bindFramebuffer(o.FRAMEBUFFER,e.getFramebuffer()),o.viewport(0,0,i[0],i[1]),o.bindTexture(o.TEXTURE_2D,e.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL(),o=r.UNSIGNED_INT,i=e-t,a=4*t;r.drawElements(r.TRIANGLES,i,o,a)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,o=$w1WE$import$resetTransform(this.offsetScaleMatrix_);$w1WE$import$scaleTransform(o,2/e[0],2/e[1]);var i=$w1WE$import$resetTransform(this.offsetRotateMatrix_);0!==r&&$w1WE$import$rotateTransform(i,-r),this.setUniformMatrixValue($w1WE$export$DefaultUniform.OFFSET_SCALE_MATRIX,$w1WE$import$fromTransform(this.tmpMat4_,o)),this.setUniformMatrixValue($w1WE$export$DefaultUniform.OFFSET_ROTATION_MATRIX,$w1WE$import$fromTransform(this.tmpMat4_,i)),this.setUniformFloatValue($w1WE$export$DefaultUniform.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue($w1WE$export$DefaultUniform.ZOOM,t.viewState.zoom),this.setUniformFloatValue($w1WE$export$DefaultUniform.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),o=0;this.uniforms_.forEach(function(i){if((e=\"function\"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r[\"TEXTURE\"+o]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(this.getUniformLocation(i.name),o++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,$w1WE$import$fromTransform(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else\"number\"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),o=r.createShader(e);return r.shaderSource(o,t),r.compileShader(o),o},e.prototype.getProgram=function(t,e){var r=this.getGL(),o=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(o)&&(this.shaderCompileErrors_=\"Fragment shader compilation failed:\\n\"+r.getShaderInfoLog(o)),r.getShaderInfoLog(i)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||\"\")+\"Vertex shader compilation failed:\\n\"+r.getShaderInfoLog(i));var a=r.createProgram();return r.attachShader(a,o),r.attachShader(a,i),r.linkProgram(a),a},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,o=t.viewState.rotation,i=t.viewState.resolution,a=t.viewState.center;return $w1WE$import$resetTransform(e),$w1WE$import$composeTransform(e,0,0,2/(i*r[0]),2/(i*r[1]),-o,-a[0],-a[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,o,i){var a=this.getAttributeLocation(t);a<0||(this.getGL().enableVertexAttribArray(a),this.getGL().vertexAttribPointer(a,e,r,!1,o,i))},e.prototype.enableAttributes=function(t){for(var e=$w1WE$export$computeAttributesStride(t),r=0,o=0;o<t.length;o++){var i=t[o];this.enableAttributeArray_(i.name,i.size,i.type||$w1WE$import$FLOAT,e,r),r+=i.size*$w1WE$var$getByteSizeFromType(i.type)}},e.prototype.handleWebGLContextLost=function(){$w1WE$import$clear(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var o=this.getGL(),i=r||o.createTexture(),a=o.RGBA,n=o.RGBA,s=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,i),e?o.texImage2D(o.TEXTURE_2D,0,a,n,s,e):o.texImage2D(o.TEXTURE_2D,0,a,t[0],t[1],0,n,s,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),i},e}($w1WE$import$Disposable);function $w1WE$export$computeAttributesStride(t){for(var e=0,r=0;r<t.length;r++){var o=t[r];e+=o.size*$w1WE$var$getByteSizeFromType(o.type)}return e}function $w1WE$var$getByteSizeFromType(t){switch(t){case $w1WE$export$AttributeType.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case $w1WE$export$AttributeType.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case $w1WE$export$AttributeType.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case $w1WE$export$AttributeType.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}$w1WE$exports.computeAttributesStride=$w1WE$export$computeAttributesStride,$w1WE$exports.default=$w1WE$export$default;"},"sourceMaps":null,"error":null,"hash":"4cadf0235f653c80180be36e7072b461","cacheData":{"env":{},"imports":{"$w1WE$import$getUid":["../util.js","getUid"],"$w1WE$import$Disposable":["../Disposable.js","default"],"$w1WE$import$clear":["../obj.js","clear"],"$w1WE$import$ContextEventType":["../webgl/ContextEventType.js","default"],"$w1WE$import$composeTransform":["../transform.js","compose"],"$w1WE$import$createTransform":["../transform.js","create"],"$w1WE$import$resetTransform":["../transform.js","reset"],"$w1WE$import$rotateTransform":["../transform.js","rotate"],"$w1WE$import$scaleTransform":["../transform.js","scale"],"$w1WE$import$create":["../vec/mat4.js","create"],"$w1WE$import$fromTransform":["../vec/mat4.js","fromTransform"],"$w1WE$import$WebGLPostProcessingPass":["./PostProcessingPass.js","default"],"$w1WE$import$FLOAT":["../webgl.js","FLOAT"],"$w1WE$import$getContext":["../webgl.js","getContext"],"$w1WE$import$getSupportedExtensions":["../webgl.js","getSupportedExtensions"],"$w1WE$import$UNSIGNED_BYTE":["../webgl.js","UNSIGNED_BYTE"],"$w1WE$import$UNSIGNED_INT":["../webgl.js","UNSIGNED_INT"],"$w1WE$import$UNSIGNED_SHORT":["../webgl.js","UNSIGNED_SHORT"],"$w1WE$import$includes":["../array.js","includes"],"$w1WE$import$assert":["../asserts.js","assert"]},"exports":{"ShaderType":"$w1WE$export$ShaderType","DefaultUniform":"$w1WE$export$DefaultUniform","AttributeType":"$w1WE$export$AttributeType","computeAttributesStride":"$w1WE$export$computeAttributesStride","default":"$w1WE$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}